let activeBtnLoader;const _csrf=$('meta[name="csrf-token"]').attr("content");jQuery.each(["put","patch","delete"],(e,a)=>{jQuery[a]=(e,o,t,s)=>(jQuery.isFunction(o)&&(s=s||t,t=o,o=void 0),jQuery.ajax({url:e,type:a,dataType:s,data:o,headers:o.headers,success:t}))});const debug=e=>{if("false"===$('meta[name="debug"]').attr("content"))return!1;console.time("debug finished in"),console.log("%c [DEBUG] :","color: orange; font-weight: bold",e),console.trace("StackTrace"),"object"==typeof e&&console.table(e),console.timeEnd("debug finished in")},notification=e=>{$.notify({icon:`fal fa-${e.icon}`,title:`<b>${e.title}</b>`,message:`${e.message||""}`},{type:`${e.type}`,allow_dismiss:!0,newest_on_top:!0,showProgressbar:!0,placement:{from:"bottom",align:"left"},offset:20,spacing:10,z_index:9999999999,delay:e.timer||5e3,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},onClosed:e.onClosed})},errorsHandler=e=>{if(debug(e),_.isNil(e.responseJSON))notification({icon:"exclamation",type:"danger",title:"Une erreur est survenue :",message:e.responseText});else{const a=void 0===e?null:e.responseJSON;if(a.errors)a.errors.forEach((e,a)=>{notification({icon:"exclamation",type:"danger",title:"Champ invalide :",message:`${e.param}`})});else{let e=a.sequelizeError?`<b>${errors.sequelizeError.name}</b>: ${errors.sequelizeError.original.sqlMessage}`:a.message||a||"Unknown Error";e="object"==typeof e?e.name:e,notification({icon:"exclamation",type:"danger",title:"Une erreur est survenue :",message:e})}}},catchError=(e,a,o)=>{let t,s;switch(debug({xhr:e,status:a,error:o}),o){case"Bad Request":t="Bad Request";break;case"Internal Server Error":if(t="An internal server error occurred.",e.responseJSON)if("object"==typeof e.responseJSON.message)switch(e.responseJSON.message.name){case"SequelizeForeignKeyConstraintError":s=`ForeignKeyConstraintError: ${e.responseJSON.message.original.sqlMessage}`;break;default:s=e.responseJSON.message.sqlMessage}else"string"==typeof e.responseJSON.message&&(s=e.responseJSON.message);break;case"Forbidden":t="Access not allowed :",s="You can't access this page.";break;case"Not Found":t=e.responseJSON?e.responseJSON.message:"Page not found.";break;case"Request Time-out":t="Request Time-out.";break;case"Unauthorized":t="Unauthorized.";break;case"":t="Connection lost:",s="Connection between you and AO Files is actually unavailable. Please take a look at your connection or retry in few minutes.";break;default:t=e.responseJSON?e.responseJSON.name:`Unknown Error (HTTP Error ${o})`,s=e.responseJSON?e.responseJSON.message:null}_.isNil(t)||notification({icon:"exclamation",type:"danger",title:t,message:s})},loadTemplate=(e,a,o)=>{if(a.partials)for(let e=0;e<a.partials.length;e++)$.ajax({url:`/views/partials/${a.partials[e]}.hbs`,cache:!0,success:o=>{Handlebars.registerPartial(`${a.partials[e]}`,o)}}).catch((e,a,o)=>{$("#loadingModal").modal("hide"),catchError(e,a,o)});$.ajax({url:e,cache:!0,success:e=>{if(!a.modal){const t=Handlebars.compile(e);return o(t(a))}$.ajax({url:`/views/modals/partials/${a.modal}.hbs`,cache:!0,success:t=>{Handlebars.registerPartial(`${a.modal}`,t);const s=Handlebars.compile(e);return o(s(a))}}).catch((e,a,o)=>{$("#loadingModal").modal("hide"),catchError(e,a,o)})}}).catch((e,a,o)=>{$("#loadingModal").modal("hide"),catchError(e,a,o)})},createModal=(e,a)=>{$("#loadingModal").modal({backdrop:"static",keyboard:!1}),$(`#${e.id}`).length>0&&($(`#${e.id}`).modal("hide"),$(`#${e.id}`).remove()),loadTemplate("/views/modals/main.hbs",e,o=>{if($("body").append(o),$("#loadingModal").modal("hide"),"cantBeClose"in e&&e.cantBeClose?$(`#${e.id}`).modal({backdrop:"static",keyboard:!1}):$(`#${e.id}`).modal(),a)return a()})};$(document).ready((function(){$("body").prepend('<div id="dialog"></div>'),$("#dialog").dialog({autoOpen:!1,show:{effect:"fade"},hide:{effect:"fade"},modal:!0,width:650,position:{my:"top",at:"top+150"},close:(e,a)=>$("#wrap").show(),open:(e,a)=>{$(".ui-widget-overlay").bind("click",()=>{$("#dialog").dialog("close")})}}),$(document).on("click",".btn-loader",e=>{const a=$(e.target);activeBtnLoader=a;const o=a.attr("data-loading-text");a.html()!==o&&(a.data("original-text",a.html()),a.html(o)),setTimeout((function(){a.html(a.data("original-text"))}),1e4)}),$(".nav-tabs > li a[title]").tooltip(),$('a[data-toggle="tab"]').on("show.bs.tab",(function(e){if($(e.target).parent().hasClass("disabled"))return!1})),$(".stop-step").click((function(e){history.back()}))})),$((function(){$('[data-toggle="tooltip"]').tooltip()}));